(function(t){function e(e){for(var s,o,n=e[0],l=e[1],c=e[2],d=0,h=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={authorize:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;r.push([2,"chunk-vendors"]),a()})({2:function(t,e,a){t.exports=a("429a")},"402c":function(t,e,a){"use strict";a("5363");var s=a("2b0e"),i=a("f309");s["a"].use(i["a"]),e["a"]=new i["a"]({icons:{iconfont:"mdi"}})},"429a":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[t.displayable?a("Authorize",{attrs:{isAuthorized:t.isAuthorized,isRequiredLogin:t.isRequiredLogin,isRequiredSecurityCode:t.isRequiredSecurityCode}}):t._e()],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-card",{staticClass:"elevation-12 pa-6"},[s("v-toolbar",{attrs:{color:"transparent",flat:""}},[s("v-img",{attrs:{"max-width":"50px",src:a("b05f")}}),s("v-toolbar-title",{staticClass:"ml-3"},[t._v("Feed2Wall")])],1),t.isAuthorized?t.isRequiredLogin?s("v-flex",{attrs:{xs12:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{error:!t.isInstagramAccountUsernameValid,label:"Instagram Username",hint:"Phone number, username, or email",required:""},on:{focusout:t.validateUsername},model:{value:t.instagramUsername,callback:function(e){t.instagramUsername=e},expression:"instagramUsername"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{error:!t.isInstagramAccountPasswordValid,label:"Instagram password",type:"password",required:""},on:{focusout:t.validatePassword},model:{value:t.instagramPassword,callback:function(e){t.instagramPassword=e},expression:"instagramPassword"}})],1)],1):t.isRequiredSecurityCode?s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{maxlength:"6",label:"Login Security Code"},model:{value:t.securityCode,callback:function(e){t.securityCode=e},expression:"securityCode"}})],1):t._e():s("v-card-text",[s("v-text-field",{attrs:{type:"password",label:"Enter Authorization Key"},model:{value:t.authorizationKey,callback:function(e){t.authorizationKey=e},expression:"authorizationKey"}})],1),s("h4",{directives:[{name:"show",rawName:"v-show",value:t.displayAlert,expression:"displayAlert"}],class:t.alertClass},[t._v(t._s(t.alertMsg))]),s("v-container",[t.isAuthorized?t.isRequiredLogin?s("v-row",[s("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[t.showBackButton?s("v-btn",{attrs:{large:"",loading:t.buttonDisabled},on:{click:t.backToSubmitCode}},[t._v("Back")]):t._e()],1),s("v-col",{attrs:{cols:"4",sm:"4",md:"4"}}),s("v-col",{staticClass:"d-flex align-end flex-column",attrs:{cols:"4",sm:"4",md:"4"}},[s("v-btn",{attrs:{large:"",color:"primary",loading:t.buttonDisabled},on:{click:t.saveLoginInfo}},[t._v("Save")])],1)],1):t.isRequiredSecurityCode?s("v-row",[s("v-col",{attrs:{cols:"4",md:"4",sm:"4"}},[s("v-btn",{attrs:{color:"error",loading:t.buttonDisabled},on:{click:t.logout}},[t._v("Logout")])],1),s("v-col",{attrs:{cols:"4",md:"4",sm:"4"}},[s("v-btn",{attrs:{loading:t.buttonDisabled},on:{click:t.getNewSecurityCode}},[t._v("New code")])],1),s("v-col",{staticClass:"d-flex align-end flex-column",attrs:{cols:"4",md:"4",sm:"4"}},[s("v-btn",{attrs:{color:"primary",loading:t.buttonDisabled},on:{click:t.submitSecurityCode}},[t._v("Submit")])],1)],1):t._e():s("v-row",[s("v-col",{attrs:{cols:"8",sm:"8",md:"8"}}),s("v-col",{staticClass:"d-flex align-end flex-column",attrs:{cols:"4",sm:"4",md:"4"}},[s("v-btn",{attrs:{large:"",color:"primary",loading:t.buttonDisabled},on:{click:t.authorize}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)],1)},n=[],l=a("bc3a"),c=a.n(l),u={name:"Authorize",props:{isAuthorized:{type:Boolean,required:!0},isRequiredLogin:{type:Boolean,required:!0},isRequiredSecurityCode:{type:Boolean,require:!0}},data(){return{authorizationKey:"",instagramUsername:"",instagramPassword:"",isInstagramAccountUsernameValid:!1,isInstagramAccountPasswordValid:!1,displayAlert:!1,alertMsg:"",alertClass:"",securityCode:"",buttonDisabled:!1,showBackButton:!1}},methods:{async authorize(){this.buttonDisabled=!0;try{const t={authorizationKey:this.authorizationKey},{data:e}=await c.a.post(`http://${location.host}/api/v1/authorize`,t),a=e.lastRequestedUri;this.displayAlert=!1,this.isRequiredInstagramLogin||(window.location.href=`http://${location.host}${a}`)}catch(t){console.warn(t),this.alertMsg="Authorization failed",this.displayAlert=!0,this.alertClass="red--text"}finally{this.buttonDisabled=!1}},validateUsername(){this.isInstagramAccountUsernameValid=0!==this.instagramUsername.length},validatePassword(){this.isInstagramAccountPasswordValid=0!==this.instagramPassword.length},async saveLoginInfo(){this.buttonDisabled=!0;try{const t={username:this.instagramUsername,password:this.instagramPassword},{data:e}=await c.a.post(`http://${location.host}/api/v1/save-instagram-login-info`,t);if(e.success){const t=e.lastRequestUri;this.displayAlert=!1,window.location.href=`http://${location.host}${t}`}else this.displayAlert=!0,this.alertMsg=e.error,this.alertClass="red--text"}catch(t){console.warn(t),this.alertMsg="Saving login info failed!",this.displayAlert=!0,this.alertClass="red--text"}finally{this.buttonDisabled=!1}},async submitSecurityCode(){this.buttonDisabled=!0;try{const t={securityCode:this.securityCode},{data:e}=await c.a.post(`http://${location.host}/api/v1/submit-security-code`,t);e.success?(this.alertMsg="Submit code successfully. Retry submitting if device's screen shows error message",this.displayAlert=!0,this.alertClass="green--text"):(this.displayAlert=!0,this.alertMsg=e.error,this.alertClass="red--text")}catch(t){console.warn(t),this.alertMsg="Submitting security code failed!",this.displayAlert=!0,this.alertClass="red--text"}finally{this.buttonDisabled=!1}},logout(){this.isRequiredSecurityCode=!1,this.isRequiredLogin=!0,this.showBackButton=!0,this.displayAlert=!1},backToSubmitCode(){this.isRequiredSecurityCode=!0,this.isRequiredLogin=!1,this.displayAlert=!1},async getNewSecurityCode(){this.buttonDisabled=!0;try{await c.a.get(`http://${location.host}/api/v1/get-new-code`),this.alertMsg="Please check your email",this.displayAlert=!0,this.alertClass="green--text"}catch(t){console.warn(t),this.alertMsg="Send request failed",this.displayAlert=!0,this.alertClass="red--text"}finally{this.buttonDisabled=!1}}}},d=u,h=a("2877"),p=a("6544"),b=a.n(p),f=a("8336"),m=a("b0af"),g=a("99d9"),y=a("62ad"),v=a("a523"),w=a("0e8f"),x=a("adda"),C=a("0fd9"),A=a("8654"),q=a("71d9"),S=a("2a7f"),z=Object(h["a"])(d,o,n,!1,null,"4f1a159a",null),R=z.exports;b()(z,{VBtn:f["a"],VCard:m["a"],VCardText:g["b"],VCol:y["a"],VContainer:v["a"],VFlex:w["a"],VImg:x["a"],VRow:C["a"],VTextField:A["a"],VToolbar:q["a"],VToolbarTitle:S["a"]});var _=a("4666"),k={name:"App",data(){return{displayable:!1,isAuthorized:!0,isRequiredLogin:!1}},components:{Authorize:R},async beforeCreate(){try{const t=await Object(_["c"])(),e=await Object(_["a"])(),a=await Object(_["b"])();this.displayable=!t||e||a,this.isAuthorized=t,this.isRequiredLogin=e,this.isRequiredSecurityCode=a,this.displayable||(window.location.href=`http://${location.host}/`)}catch(t){console.error(t)}}},P=k,V=a("7496"),O=a("a75b"),j=Object(h["a"])(P,i,r,!1,null,"3f911640",null),D=j.exports;b()(j,{VApp:V["a"],VContent:O["a"]});var L=a("402c");s["a"].config.productionTip=!1,new s["a"]({vuetify:L["a"],render:t=>t(D)}).$mount("#app")},4666:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return n}));var s=a("bc3a"),i=a.n(s);async function r(){const{data:t}=await i.a.get(`http://${location.host}/api/v1/is-authorized`);return t.isUserAuthorized}async function o(){const{data:t}=await i.a.get(`http://${location.host}/api/v1/is-required-login`);return t.isRequiredLogin}async function n(){const{data:t}=await i.a.get(`http://${location.host}/api/v1/is-required-security-code`);return t.isRequiredSecurityCode}},b05f:function(t,e,a){t.exports=a.p+"img/rockiton_black.13b5e8b3.png"}});
//# sourceMappingURL=authorize.efde415c.js.map